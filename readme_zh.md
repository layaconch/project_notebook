# 运维平台（DevOps Operations Platform）

本模块是基于 Odoo 18 的运维平台，整合了交互式笔记本、需求/问题跟踪以及用户培训内容。适合 DevOps/SRE 团队集中管理脚本、数据源与协同流程。

## 核心功能
- **交互式笔记本**：一个笔记本包含多条顺序执行的单元（SQL / 文档）。输出使用 `o_devops_table` 样式，展示更清晰。
- **多数据源支持**：可配置 PostgreSQL、Oracle、SQL Server 与 CSV；PostgreSQL 数据源可指定 schema（search_path）。
- **执行模式与计划任务**：支持“立即执行”或“计划执行”，每个笔记本只允许一个激活的计划。系统自带 `devops_notebook_cron`（分钟级及以上频率）。
- **团队权限**：分类上可指定“允许的用户组”，也可设置公共标签供所有用户查看/执行。
- **培训专区**：在“用户培训”菜单中维护培训课程、手册、外部链接等资料，区分管理员与学习用户。
- **界面优化**：左侧 20% 栏显示数据源、所有者、统计与单元清单；右侧 80% 区域专注单元编辑，输入区使用浅蓝色以便区分。
- **开发便利**：界面和执行模式已经针对 DevOps 场景优化，默认即可满足日常 Notebook 需求。

## 环境要求
- Odoo 18.0（已在官方 `odoo:18.0-20251106` 镜像下验证）
- PostgreSQL 16.x 作为主库
- 其余依赖使用官方镜像自带的 Python 包

## 安装步骤
1. 将本仓库克隆至自定义 addons 目录（例：`/mnt/extra-addons/devops`）。
2. 确保目录名称为 `devops`。
3. 在 `odoo.conf` 中加入该路径，或配置 `ODOO_ADDONS_PATH`。
4. 重启 Odoo 服务。
5. 在 Apps 中更新应用列表，安装“DevOps Operations Platform”（建议开启开发者模式）。

## 升级方式
拉取最新代码后，重启 Odoo（如有需要），并执行：
```bash
odoo-bin -d <数据库名> -u devops --stop-after-init
```
即可更新模块的模型、视图、Cron 与翻译。

## 使用提示
- 在“运维平台 → 设置 → 数据源”中维护不同数据库连接，PostgreSQL 记得填写 schema。
- 通过“运维平台 → 笔记本管理 → 笔记本”创建与管理笔记本，表头会显示所用数据源。
- 点击“配置执行计划”按钮可打开计划表单；Cron 会按计划触发并记录执行历史。
- 分类及允许的用户组可在“运维平台 → 设置”中维护。
- “用户培训”菜单下维护培训课程、用户手册等；学习用户只能阅读。

## 未来规划
- 与 `document_knowledge` 深度集成，增强文档能力
- 引入 `queue_job` 等后台任务框架，以支持重型 Notebook 执行
- 持续完善多语言与交互体验

欢迎反馈与贡献！
